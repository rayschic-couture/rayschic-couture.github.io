<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin Rayschic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI}
body{background:linear-gradient(135deg,#1a1a2e,#2d3047);color:white;padding:20px}
.container{max-width:1200px;margin:auto;background:#2d3047;border-radius:15px;padding:30px;border-top:4px solid #d4af37}
h1{text-align:center;color:#d4af37;margin-bottom:10px}
.section{background:rgba(255,255,255,.05);padding:25px;border-radius:10px;margin:20px 0;border-left:4px solid #d4af37}
.btn{background:#d4af37;color:#1a1a2e;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin:5px;font-weight:bold}
.btn-secondary{background:transparent;border:2px solid #d4af37;color:#d4af37}
.delete-btn{background:#ff4757;color:white}
.upload-btn{background:#25D366;color:white}
.image-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}
.image-card{background:#0005;border-radius:8px;overflow:hidden}
.image-preview{width:100%;height:140px;object-fit:cover}
.image-info{padding:10px}
.image-actions{display:flex;gap:5px}
.modal{display:none;position:fixed;inset:0;background:#000c;align-items:center;justify-content:center}
.modal-content{background:#2d3047;padding:20px;border-radius:10px;width:90%;max-width:500px;border-top:4px solid #d4af37}
.status{margin-top:15px;padding:10px;border-radius:5px;text-align:center}
.success{background:#2ed57333;border:1px solid #2ed573}
.error{background:#ff475733;border:1px solid #ff4757}
.warning{background:#ffa50033;border:1px solid #ffa500}
.filter-buttons{text-align:center;margin-bottom:20px}
</style>
</head>

<body>
<div class="container">
<h1>RAY<span style="color:white">SCHIC</span> Admin</h1>

<div class="section">
<div style="display:flex;justify-content:space-between;flex-wrap:wrap">
<h2>Gestion Images</h2>
<div>
<button class="btn btn-secondary" onclick="loadImages()">Actualiser</button>
<button class="btn" onclick="showUploadModal()">Nouvelle image</button>
<button class="btn" onclick="openGitHub()">GitHub</button>
</div>
</div>

<div class="filter-buttons">
<button class="btn btn-secondary" onclick="filterImages('all')">Tout</button>
<button class="btn btn-secondary" onclick="filterImages('hero')">Hero</button>
<button class="btn btn-secondary" onclick="filterImages('costumes')">Costumes</button>
<button class="btn btn-secondary" onclick="filterImages('chemises')">Chemises</button>
<button class="btn btn-secondary" onclick="filterImages('pantalons')">Pantalons</button>
<button class="btn btn-secondary" onclick="filterImages('vestes')">Vestes</button>
</div>

<div id="imageGrid" class="image-grid"></div>
<div id="status" class="status"></div>
</div>
</div>

<div id="editModal" class="modal">
<div class="modal-content">
<h3>Remplacer image</h3>
<p id="modalFilename"></p>
<img id="modalPreview" style="width:100%;max-height:200px;object-fit:cover">
<input type="file" id="newImageInput" style="display:none">
<button class="btn" onclick="chooseNewPhoto()">Choisir image</button>
<button class="btn upload-btn" onclick="uploadToGitHub()">Ouvrir GitHub</button>
<button class="btn btn-secondary" onclick="closeEditModal()">Annuler</button>
</div>
</div>

<div id="uploadModal" class="modal">
<div class="modal-content">
<h3>Nouvelle image</h3>
<input type="file" id="uploadImageInput">
<input type="text" id="uploadFilename" placeholder="nom.jpg">
<select id="uploadCategory">
<option value="">Cat√©gorie</option>
<option value="costumes">Costumes</option>
<option value="chemises">Chemises</option>
<option value="pantalons">Pantalons</option>
<option value="vestes">Vestes</option>
<option value="hero">Hero</option>
</select>
<button class="btn upload-btn" onclick="prepareNewImageUpload()">Ouvrir GitHub</button>
<button class="btn btn-secondary" onclick="closeUploadModal()">Annuler</button>
</div>
</div>

<script>
const GITHUB_REPO="rayschic-couture/rayschic-couture.github.io";
const GITHUB_BRANCH="main";
const RAW="https://raw.githubusercontent.com";

const SITE_IMAGES=["hero.jpg","costume1.jpg","costume2.jpg","chemise1.jpg","pantalon1.jpg","veste1.jpg"];

let currentEditingImage=null;

function openGitHub(){
window.open(`https://github.com/${GITHUB_REPO}/tree/${GITHUB_BRANCH}/images`,"_blank");
}

function loadImages(){
let html="";
SITE_IMAGES.forEach(f=>{
let cat=getCategory(f);
let url=`${RAW}/${GITHUB_REPO}/${GITHUB_BRANCH}/images/${f}?t=${Date.now()}`;
html+=`
<div class="image-card" data-category="${cat}">
<img src="${url}" class="image-preview">
<div class="image-info">
<b>${f}</b><br>
<button class="btn" onclick="editImage('${f}')">Modifier</button>
<button class="btn delete-btn" onclick="deleteImageGuide('${f}')">Supprimer</button>
</div>
</div>`;
});
imageGrid.innerHTML=html;
}

function getCategory(f){
if(f=="hero.jpg")return"hero";
if(f.includes("costume"))return"costumes";
if(f.includes("chemise"))return"chemises";
if(f.includes("pantalon"))return"pantalons";
if(f.includes("veste"))return"vestes";
return"autre";
}

function editImage(f){
currentEditingImage=f;
modalFilename.textContent="Remplacer "+f;
modalPreview.src=`${RAW}/${GITHUB_REPO}/${GITHUB_BRANCH}/images/${f}`;
editModal.style.display="flex";
}

function chooseNewPhoto(){newImageInput.click();}

function uploadToGitHub(){
let url=`https://github.com/${GITHUB_REPO}/upload/${GITHUB_BRANCH}/images`;
window.open(url,"_blank");
showStatus("Renomme le fichier exactement : "+currentEditingImage,"warning");
closeEditModal();
}

function deleteImageGuide(f){
let url=`https://github.com/${GITHUB_REPO}/blob/${GITHUB_BRANCH}/images/${f}`;
window.open(url,"_blank");
showStatus("Supprime l'image sur GitHub puis commit","error");
}

function prepareNewImageUpload(){
let f=uploadFilename.value;
if(!f)return alert("Nom manquant");
window.open(`https://github.com/${GITHUB_REPO}/upload/${GITHUB_BRANCH}/images`,"_blank");
showStatus("Upload et renomme en : "+f,"warning");
closeUploadModal();
}

function filterImages(cat){
document.querySelectorAll(".image-card").forEach(c=>{
c.style.display=(cat=="all"||c.dataset.category==cat)?"block":"none";
});
}

function closeEditModal(){editModal.style.display="none";}
function showUploadModal(){uploadModal.style.display="flex";}
function closeUploadModal(){uploadModal.style.display="none";}
function showStatus(msg,type){status.innerHTML=msg;status.className="status "+type;}

loadImages();
</script>
</body>
</html>
