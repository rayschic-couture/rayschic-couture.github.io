<!DOCTYPE html>
<html>
<head>
  <title>Admin Rayschic - Interface S√©curis√©e</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #2d3047 100%);
      color: white;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: #2d3047;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      border-top: 4px solid #d4af37;
    }
    
    h1 {
      color: #d4af37;
      margin-bottom: 10px;
      text-align: center;
    }
    
    h1 span {
      color: white;
    }
    
    .login-section {
      background: rgba(255,255,255,0.05);
      padding: 30px;
      border-radius: 10px;
      margin: 25px 0;
      border-left: 4px solid #d4af37;
      text-align: center;
    }
    
    .admin-section {
      display: none;
    }
    
    .section {
      background: rgba(255,255,255,0.05);
      padding: 25px;
      border-radius: 10px;
      margin: 25px 0;
      border-left: 4px solid #d4af37;
    }
    
    .btn {
      background: #d4af37;
      color: #1a1a2e;
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin: 10px 5px;
      display: inline-block;
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .btn:hover {
      background: #b8941f;
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background: transparent;
      color: #d4af37;
      border: 2px solid #d4af37;
    }
    
    .delete-btn {
      background: #ff4757;
      color: white;
    }
    
    .upload-btn {
      background: #25D366;
      color: white;
    }
    
    .status {
      padding: 15px;
      border-radius: 5px;
      margin: 15px 0;
      text-align: center;
    }
    
    .success {
      background: rgba(46, 213, 115, 0.2);
      border: 1px solid #2ed573;
      color: #2ed573;
    }
    
    .error {
      background: rgba(255, 71, 87, 0.2);
      border: 1px solid #ff4757;
      color: #ff4757;
    }
    
    .warning {
      background: rgba(255, 165, 0, 0.2);
      border: 1px solid #ffa500;
      color: #ffa500;
    }
    
    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .image-card {
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s;
    }
    
    .image-card:hover {
      transform: translateY(-5px);
    }
    
    .image-preview {
      width: 100%;
      height: 140px;
      object-fit: cover;
      display: block;
    }
    
    .image-info {
      padding: 15px;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.95);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal-content {
      background: #2d3047;
      padding: 30px;
      border-radius: 15px;
      max-width: 500px;
      width: 100%;
      border-top: 4px solid #d4af37;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .modal h3 {
      color: #d4af37;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .modal-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    input[type="password"],
    input[type="text"],
    input[type="file"],
    select {
      width: 100%;
      padding: 12px;
      background: rgba(0,0,0,0.3);
      border: 1px solid #444;
      border-radius: 5px;
      color: white;
      margin: 10px 0;
      font-size: 14px;
    }
    
    input[type="file"] {
      cursor: pointer;
    }
    
    .instructions {
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 8px;
      margin-top: 30px;
    }
    
    .instructions h3 {
      color: #d4af37;
      margin-bottom: 10px;
    }
    
    .spinner {
      width: 30px;
      height: 30px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #d4af37;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
      display: inline-block;
      vertical-align: middle;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .category-badge {
      display: inline-block;
      background: rgba(212, 175, 55, 0.2);
      color: #d4af37;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 11px;
      margin-right: 5px;
    }
    
    .image-actions {
      display: flex;
      gap: 5px;
      margin-top: 10px;
    }
    
    .image-actions .btn {
      flex: 1;
      padding: 8px;
      font-size: 12px;
      margin: 2px;
    }
    
    .filter-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .token-warning {
      background: rgba(255, 71, 87, 0.1);
      border: 1px solid #ff4757;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
      text-align: center;
    }
    
    @media (max-width: 768px) {
      .image-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .modal-content {
        padding: 20px;
      }
      
      .btn {
        padding: 10px 15px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>RAY<span>SCHIC</span> Admin</h1>
    <p style="text-align: center; color: #bdc3c7; margin-bottom: 30px;">Interface simplifi√©e de gestion des images</p>
    
    <!-- ADMIN SECTION DIRECT -->
    <div id="adminSection" class="admin-section">
      <div class="section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
          <h2 style="color: #d4af37;">üñºÔ∏è Gestion des Images</h2>
          <div>
            <button class="btn btn-secondary" onclick="loadImages()">
              <i class="fas fa-sync-alt"></i> Actualiser
            </button>
            <button class="btn" onclick="showUploadModal()">
              <i class="fas fa-plus"></i> Nouvelle Image
            </button>
            <button class="btn" onclick="openGitHub()" style="background: #666;">
              <i class="fab fa-github"></i> Ouvrir GitHub
            </button>
          </div>
        </div>
        
        <!-- Filtres -->
        <div class="filter-buttons">
          <button class="btn btn-secondary active-filter" onclick="filterImages('all')">Tout</button>
          <button class="btn btn-secondary" onclick="filterImages('hero')">Hero</button>
          <button class="btn btn-secondary" onclick="filterImages('costumes')">Costumes</button>
          <button class="btn btn-secondary" onclick="filterImages('chemises')">Chemises</button>
          <button class="btn btn-secondary" onclick="filterImages('pantalons')">Pantalons</button>
          <button class="btn btn-secondary" onclick="filterImages('vestes')">Vestes</button>
        </div>
        
        <!-- Grille d'images -->
        <div id="imageGrid" class="image-grid">
          <!-- Images will be loaded here -->
        </div>
        
        <div id="status" class="status"></div>
      </div>
      
      <!-- INSTRUCTIONS SIMPLES -->
      <div class="instructions">
        <h3>üìã Comment modifier une image :</h3>
        <ol style="padding-left: 20px; margin: 15px 0;">
          <li><strong>Cliquez sur "Modifier"</strong> sous une image</li>
          <li><strong>Cliquez sur "Choisir une nouvelle photo"</strong></li>
          <li>S√©lectionnez une photo depuis votre ordinateur</li>
          <li><strong>Cliquez sur "Ouvrir GitHub pour upload"</strong></li>
          <li>Suivez les instructions sur GitHub</li>
          <li><strong>Cliquez sur "Forcer rechargement du site"</strong></li>
        </ol>
        
        <div style="margin-top: 20px; background: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 8px;">
          <h4 style="color: #d4af37; margin-bottom: 10px;">‚ö†Ô∏è Important :</h4>
          <p style="color: #aaa; font-size: 14px;">
            Cette interface vous guide pour uploader manuellement sur GitHub.<br>
            C'est 100% fiable et s√©curis√©.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: EDIT IMAGE -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>üì§ Upload vers GitHub</h3>
      <p id="modalFilename" style="text-align: center; color: #aaa; margin-bottom: 20px;"></p>
      
      <div style="text-align: center; margin: 20px 0;">
        <img id="modalPreview" src="" style="max-width: 100%; max-height: 250px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #d4af37;" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/400x250/2d3047/d4af37?text=Image'">
        
        <input type="file" id="newImageInput" accept="image/*" style="display: none;">
        <button class="btn" onclick="chooseNewPhoto()" style="width: 100%; margin-bottom: 15px;">
          <i class="fas fa-camera"></i> Choisir une nouvelle photo
        </button>
        
        <div id="fileInfo" style="display: none; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px; margin: 10px 0;">
          <p style="margin: 5px 0; color: #d4af37;" id="selectedFileName"></p>
          <p style="margin: 5px 0; color: #aaa; font-size: 12px;" id="selectedFileSize"></p>
        </div>
        
        <p style="color: #aaa; font-size: 12px;">Formats : JPG, PNG ‚Ä¢ Max 5MB</p>
      </div>
      
      <div class="modal-actions">
        <button class="btn" id="uploadButton" onclick="uploadToGitHub()" style="display: none;">
          <i class="fab fa-github"></i> Ouvrir GitHub pour upload
        </button>
        <button class="btn btn-secondary" onclick="closeEditModal()">
          <i class="fas fa-times"></i> Annuler
        </button>
      </div>
    </div>
  </div>

  <!-- MODAL: UPLOAD NEW IMAGE -->
  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <h3>üì§ Uploader une nouvelle image</h3>
      
      <div style="margin: 20px 0;">
        <input type="file" id="uploadImageInput" accept="image/*" style="display: none;">
        <button class="btn" onclick="chooseUploadPhoto()" style="width: 100%; margin-bottom: 15px;">
          <i class="fas fa-upload"></i> S√©lectionner une image
        </button>
        
        <input type="text" id="uploadFilename" placeholder="Nom du fichier (ex: costume7.jpg)" 
               style="width: 100%; margin-bottom: 15px;">
        
        <select id="uploadCategory" style="width: 100%; margin-bottom: 15px;">
          <option value="">Choisir une cat√©gorie</option>
          <option value="costumes">Costumes</option>
          <option value="chemises">Chemises</option>
          <option value="pantalons">Pantalons</option>
          <option value="vestes">Vestes</option>
          <option value="accessoires">Accessoires</option>
          <option value="hero">Image Hero (principale)</option>
        </select>
        
        <div id="uploadFileInfo" style="display: none; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
          <p style="margin: 5px 0; color: #d4af37;" id="uploadFileName"></p>
          <p style="margin: 5px 0; color: #aaa; font-size: 12px;" id="uploadFileSize"></p>
        </div>
      </div>
      
      <div class="modal-actions">
        <button class="btn upload-btn" onclick="prepareNewImageUpload()">
          <i class="fab fa-github"></i> Ouvrir GitHub pour upload
        </button>
        <button class="btn btn-secondary" onclick="closeUploadModal()">
          <i class="fas fa-times"></i> Annuler
        </button>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const GITHUB_REPO = 'rayschic-couture/rayschic-couture.github.io';
    const GITHUB_BRANCH = 'main';
    const GITHUB_RAW = 'https://raw.githubusercontent.com';
    
    let currentEditingImage = null;
    let selectedFile = null;
    let selectedNewFilename = null;
    
    // Images du site
    const SITE_IMAGES = [
      // Hero
      'hero.jpg',
      // Costumes
      'costume1.jpg', 'costume2.jpg', 'costume3.jpg', 'costume4.jpg', 'costume5.jpg', 'costume6.jpg',
      // Chemises
      'chemise1.jpg', 'chemise2.jpg', 'chemise3.jpg', 'chemise4.jpg', 'chemise5.jpg', 'chemise6.jpg',
      // Pantalons
      'pantalon1.jpg', 'pantalon2.jpg', 'pantalon3.jpg', 'pantalon4.jpg', 'pantalon5.jpg', 'pantalon6.jpg',
      // Vestes
      'veste1.jpg', 'veste2.jpg', 'veste3.jpg', 'veste4.jpg', 'veste5.jpg', 'veste6.jpg',
      // Tenues
      'tenue1.jpg', 'tenue2.jpg', 'tenue3.jpg', 'tenue4.jpg', 'tenue5.jpg', 'tenue6.jpg',
      // Accessoires
      'accessoire1.jpg', 'accessoire2.jpg', 'accessoire3.jpg', 'accessoire4.jpg', 'accessoire5.jpg', 'accessoire6.jpg'
    ];
    
    // Initialisation
    document.addEventListener('DOMContentLoaded', function() {
      loadFontAwesome();
      setupEventListeners();
      showAdminInterface(); // Montrer directement l'admin sans login
    });
    
    function loadFontAwesome() {
      if (!document.querySelector('link[href*="font-awesome"]')) {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
        document.head.appendChild(link);
      }
    }
    
    function setupEventListeners() {
      // Edit modal file input
      document.getElementById('newImageInput').addEventListener('change', function(e) {
        if (e.target.files[0]) {
          handleImageSelection(e.target.files[0], 'edit');
        }
      });
      
      // Upload modal file input
      document.getElementById('uploadImageInput').addEventListener('change', function(e) {
        if (e.target.files[0]) {
          handleImageSelection(e.target.files[0], 'upload');
        }
      });
    }
    
    function showAdminInterface() {
      document.getElementById('adminSection').style.display = 'block';
      loadImages();
    }
    
    function openGitHub() {
      const githubURL = `https://github.com/${GITHUB_REPO}/tree/${GITHUB_BRANCH}/images`;
      window.open(githubURL, '_blank');
      showStatus('‚úÖ GitHub ouvert. Vous pouvez voir toutes les images.', 'success');
    }
    
    async function loadImages() {
      const imageGrid = document.getElementById('imageGrid');
      imageGrid.innerHTML = '<div class="status"><div class="spinner"></div><p>Chargement des images...</p></div>';
      
      try {
        let imagesHtml = '';
        
        SITE_IMAGES.forEach(filename => {
          const category = getCategoryFromFilename(filename);
          const imageUrl = `${GITHUB_RAW}/${GITHUB_REPO}/${GITHUB_BRANCH}/images/${filename}?t=${Date.now()}`;
          const displayName = filename.replace('.jpg', '').replace(/(\d+)/, ' $1').toUpperCase();
          
          imagesHtml += `
            <div class="image-card" data-category="${category}">
              <img src="${imageUrl}" class="image-preview" 
                   onerror="this.onerror=null; this.src='https://via.placeholder.com/200x140/2d3047/d4af37?text=${filename}'"
                   alt="${filename}" loading="lazy">
              <div class="image-info">
                <p style="margin: 5px 0; font-weight: bold; font-size: 14px;">${displayName}</p>
                <p style="margin: 3px 0; color: #aaa; font-size: 12px;">
                  <span class="category-badge">${category}</span>
                  ${filename}
                </p>
                <div class="image-actions">
                  <button class="btn" onclick="editImage('${filename}')">
                    <i class="fas fa-edit"></i> Modifier
                  </button>
                  <button class="btn delete-btn" onclick="deleteImageGuide('${filename}')">
                    <i class="fas fa-trash"></i> Supprimer
                  </button>
                </div>
              </div>
            </div>
          `;
        });
        
        imageGrid.innerHTML = imagesHtml;
        showStatus(`‚úÖ ${SITE_IMAGES.length} images charg√©es`, 'success');
        
      } catch (error) {
        imageGrid.innerHTML = `<div class="status error">
          <p>Erreur de chargement</p>
          <button class="btn" onclick="loadImages()">R√©essayer</button>
        </div>`;
      }
    }
    
    function getCategoryFromFilename(filename) {
      if (filename === 'hero.jpg') return 'hero';
      if (filename.includes('costume')) return 'costumes';
      if (filename.includes('chemise')) return 'chemises';
      if (filename.includes('pantalon')) return 'pantalons';
      if (filename.includes('veste')) return 'vestes';
      if (filename.includes('tenue')) return 'tenues';
      if (filename.includes('accessoire')) return 'accessoires';
      return 'autre';
    }
    
    function editImage(filename) {
      currentEditingImage = { filename };
      
      const modal = document.getElementById('editModal');
      const preview = document.getElementById('modalPreview');
      const filenameEl = document.getElementById('modalFilename');
      
      filenameEl.textContent = `Remplacer : ${filename}`;
      preview.src = `${GITHUB_RAW}/${GITHUB_REPO}/${GITHUB_BRANCH}/images/${filename}?t=${Date.now()}`;
      
      // Reset
      document.getElementById('uploadButton').style.display = 'none';
      document.getElementById('fileInfo').style.display = 'none';
      selectedFile = null;
      
      modal.style.display = 'flex';
    }
    
    function chooseNewPhoto() {
      document.getElementById('newImageInput').click();
    }
    
    function chooseUploadPhoto() {
      document.getElementById('uploadImageInput').click();
    }
    
    function handleImageSelection(file, type) {
      // Validation
      if (file.size > 5 * 1024 * 1024) {
        showStatus('‚ùå Fichier trop grand (max 5MB)', 'error');
        return;
      }
      
      if (!file.type.match('image.*')) {
        showStatus('‚ùå Format non support√©. Utilisez JPG ou PNG', 'error');
        return;
      }
      
      selectedFile = file;
      
      // Display file info
      const fileSize = (file.size / 1024 / 1024).toFixed(2);
      
      if (type === 'edit') {
        document.getElementById('selectedFileName').textContent = file.name;
        document.getElementById('selectedFileSize').textContent = `${fileSize} MB`;
        document.getElementById('fileInfo').style.display = 'block';
        document.getElementById('uploadButton').style.display = 'inline-block';
        
        // Preview
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('modalPreview').src = e.target.result;
        };
        reader.readAsDataURL(file);
        
      } else if (type === 'upload') {
        document.getElementById('uploadFileName').textContent = file.name;
        document.getElementById('uploadFileSize').textContent = `${fileSize} MB`;
        document.getElementById('uploadFileInfo').style.display = 'block';
        
        // Auto-generate filename if empty
        if (!document.getElementById('uploadFilename').value) {
          const ext = file.name.split('.').pop();
          const timestamp = Date.now();
          document.getElementById('uploadFilename').value = `image_${timestamp}.${ext}`;
        }
      }
      
      showStatus('‚úÖ Image s√©lectionn√©e : ' + file.name, 'success');
    }
    
    function uploadToGitHub() {
      if (!selectedFile || !currentEditingImage) {
        showStatus('‚ùå Aucune image s√©lectionn√©e', 'error');
        return;
      }
      
      const filename = currentEditingImage.filename;
      const githubUploadURL = `https://github.com/${GITHUB_REPO}/upload/${GITHUB_BRANCH}/images`;
      
      closeEditModal();
      
      // Afficher les instructions d√©taill√©es
      showStatus(`
        <div style="text-align: center; padding: 20px;">
          <h3 style="color: #d4af37; margin-bottom: 20px;">üì§ Instructions pour uploader "${filename}"</h3>
          
          <div style="background: rgba(212,175,55,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h4 style="color: white; margin-bottom: 15px;">√âtape 1 : Ouvrir GitHub</h4>
            <a href="${githubUploadURL}" target="_blank" class="btn" style="background: #d4af37; font-size: 16px; padding: 15px 30px;">
              <i class="fab fa-github"></i> Cliquez ici pour ouvrir GitHub
            </a>
          </div>
          
          <div style="background: rgba(46,213,115,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
            <h4 style="color: #2ed573; margin-bottom: 10px;">√âtape 2 : Upload manuel</h4>
            <ol style="padding-left: 20px;">
              <li>Sur GitHub, <strong>glissez-d√©posez votre image</strong></li>
              <li><strong>Renommez le fichier en :</strong> <code style="background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px;">${filename}</code></li>
              <li>En bas de page, cliquez sur <strong>"Commit changes"</strong></li>
              <li>Laissez le message par d√©faut</li>
              <li>Cliquez sur <strong>"Commit changes"</strong> (le bouton vert)</li>
            </ol>
          </div>
          
          <div style="background: rgba(255,107,107,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h4 style="color: #ff6b6b; margin-bottom: 10px;">‚ö†Ô∏è Important</h4>
            <p>Le nom du fichier DOIT √™tre exactement : <strong>${filename}</strong></p>
            <p>Sinon, le site ne pourra pas l'afficher !</p>
          </div>
          
          <div style="margin-top: 30px;">
            <button class="btn" onclick="forceSiteReload()" style="background: #25D366;">
              <i class="fas fa-sync"></i> √âtape 3 : Forcer rechargement du site
            </button>
            <button class="btn btn-secondary" onclick="loadImages()" style="margin-left: 10px;">
              <i class="fas fa-eye"></i> V√©rifier l'image
            </button>
          </div>
        </div>
      `, 'warning');
    }
    
    function prepareNewImageUpload() {
      const filename = document.getElementById('uploadFilename').value.trim();
      const category = document.getElementById('uploadCategory').value;
      
      if (!selectedFile || !filename || !category) {
        showStatus('‚ùå Veuillez remplir tous les champs', 'error');
        return;
      }
      
      // Validate filename
      if (!filename.match(/\.(jpg|jpeg|png)$/i)) {
        showStatus('‚ùå Le nom doit se terminer par .jpg, .jpeg ou .png', 'error');
        return;
      }
      
      selectedNewFilename = filename;
      closeUploadModal();
      
      const githubUploadURL = `https://github.com/${GITHUB_REPO}/upload/${GITHUB_BRANCH}/images`;
      
      // Afficher les instructions d√©taill√©es
      showStatus(`
        <div style="text-align: center; padding: 20px;">
          <h3 style="color: #d4af37; margin-bottom: 20px;">üì§ Cr√©er une nouvelle image "${filename}"</h3>
          
          <div style="background: rgba(212,175,55,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h4 style="color: white; margin-bottom: 15px;">√âtape 1 : Ouvrir GitHub</h4>
            <a href="${githubUploadURL}" target="_blank" class="btn" style="background: #d4af37; font-size: 16px; padding: 15px 30px;">
              <i class="fab fa-github"></i> Cliquez ici pour ouvrir GitHub
            </a>
          </div>
          
          <div style="background: rgba(46,213,115,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
            <h4 style="color: #2ed573; margin-bottom: 10px;">√âtape 2 : Upload manuel</h4>
            <ol style="padding-left: 20px;">
              <li>Sur GitHub, <strong>glissez-d√©posez votre image</strong></li>
              <li><strong>Renommez le fichier en :</strong> <code style="background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px;">${filename}</code></li>
              <li>En bas de page, cliquez sur <strong>"Commit changes"</strong></li>
              <li>Laissez le message par d√©faut</li>
              <li>Cliquez sur <strong>"Commit changes"</strong> (le bouton vert)</li>
            </ol>
          </div>
          
          <div style="background: rgba(255,107,107,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h4 style="color: #ff6b6b; margin-bottom: 10px;">‚ö†Ô∏è Important</h4>
            <p>Apr√®s upload, vous devrez mettre √† jour le fichier <strong>index.html</strong> pour utiliser cette nouvelle image.</p>
            <p>Contactez le d√©veloppeur pour cette √©tape.</p>
          </div>
          
          <div style="margin-top: 30px;">
            <button class="btn" onclick="forceSiteReload()" style="background: #25D366;">
              <i class="fas fa-sync"></i> Forcer rechargement du site
            </button>
          </div>
        </div>
      `, 'warning');
    }
    
    function deleteImageGuide(filename) {
      const githubRepoURL = `https://github.com/${GITHUB_REPO}/blob/${GITHUB_BRANCH}/images/${filename}`;
      
      if (!confirm(`‚ö†Ô∏è Supprimer "${filename}" ?\n\nCette action se fera directement sur GitHub.`)) {
        return;
      }
      
      showStatus(`
        <div style="text-align: center; padding: 20px;">
          <h3 style="color: #ff4757; margin-bottom: 20px;">üóëÔ∏è Supprimer l'image "${filename}"</h3>
          
          <div style="background: rgba(255,71,87,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h4 style="color: white; margin-bottom: 15px;">√âtape 1 : Ouvrir GitHub</h4>
            <a href="${githubRepoURL}" target="_blank" class="btn delete-btn" style="font-size: 16px; padding: 15px 30px;">
              <i class="fab fa-github"></i> Cliquez ici pour ouvrir GitHub
            </a>
          </div>
          
          <div style="background: rgba(255,71,87,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
            <h4 style="color: #ff4757; margin-bottom: 10px;">√âtape 2 : Suppression manuelle</h4>
            <ol style="padding-left: 20px;">
              <li>Sur GitHub, cliquez sur l'ic√¥ne <strong>üóëÔ∏è Trash</strong> (en haut √† droite)</li>
              <li>Confirmez la suppression en cliquant sur <strong>"Commit changes"</strong></li>
              <li>Laissez le message par d√©faut</li>
              <li>Cliquez sur <strong>"Commit changes"</strong> (le bouton vert)</li>
            </ol>
            <p style="color: #ff6b6b; margin-top: 10px; font-size: 14px;">
              ‚ö†Ô∏è Attention : Cette action est irr√©versible !
            </p>
          </div>
          
          <div style="margin-top: 30px;">
            <button class="btn" onclick="forceSiteReload()" style="background: #25D366;">
              <i class="fas fa-sync"></i> Forcer rechargement du site
            </button>
            <button class="btn btn-secondary" onclick="loadImages()" style="margin-left: 10px;">
              <i class="fas fa-eye"></i> V√©rifier la suppression
            </button>
          </div>
        </div>
      `, 'error');
    }
    
    function forceSiteReload() {
      const timestamp = Date.now();
      const siteURL = `https://rayschic-couture.github.io?v=${timestamp}`;
      
      // Ouvrir le site dans un nouvel onglet avec cache bust
      window.open(siteURL, '_blank');
      
      showStatus(`
        <div style="text-align: center; padding: 15px;">
          <h4 style="color: #2ed573; margin-bottom: 10px;">üîÑ Rechargement forc√©</h4>
          <p>Le site s'ouvre dans un nouvel onglet avec cache d√©sactiv√©.</p>
          <p>V√©rifiez que vos modifications sont visibles.</p>
          <a href="${siteURL}" target="_blank" class="btn" style="background: #2ed573; margin-top: 10px;">
            <i class="fas fa-external-link-alt"></i> Ouvrir √† nouveau
          </a>
        </div>
      `, 'success');
    }
    
    function showUploadModal() {
      document.getElementById('uploadModal').style.display = 'flex';
    }
    
    function closeEditModal() {
      document.getElementById('editModal').style.display = 'none';
      currentEditingImage = null;
      selectedFile = null;
    }
    
    function closeUploadModal() {
      document.getElementById('uploadModal').style.display = 'none';
      document.getElementById('uploadImageInput').value = '';
      document.getElementById('uploadFilename').value = '';
      document.getElementById('uploadCategory').value = '';
      document.getElementById('uploadFileInfo').style.display = 'none';
      selectedFile = null;
      selectedNewFilename = null;
    }
    
    function filterImages(category) {
      const cards = document.querySelectorAll('.image-card');
      const buttons = document.querySelectorAll('.filter-buttons .btn-secondary');
      
      // Update buttons
      buttons.forEach(btn => {
        btn.classList.remove('active-filter');
        btn.style.background = 'transparent';
        btn.style.color = '#d4af37';
      });
      
      // Activate selected button
      if (category !== 'all') {
        const activeBtn = document.querySelector(`button[onclick="filterImages('${category}')"]`);
        if (activeBtn) {
          activeBtn.classList.add('active-filter');
          activeBtn.style.background = '#d4af37';
          activeBtn.style.color = '#1a1a2e';
        }
      } else {
        const allBtn = document.querySelector(`button[onclick="filterImages('all')"]`);
        if (allBtn) {
          allBtn.classList.add('active-filter');
          allBtn.style.background = '#d4af37';
          allBtn.style.color = '#1a1a2e';
        }
      }
      
      // Filter cards
      cards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    function showStatus(message, type = '') {
      const statusDiv = document.getElementById('status');
      statusDiv.innerHTML = message;
      statusDiv.className = `status ${type}`;
    }
  </script>
</body>
</html>
